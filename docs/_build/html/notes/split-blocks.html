<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Split Blocks &#8212; Plot3D 1.6.8 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=def86cc0" />
    
    <script src="../_static/documentation_options.js?v=514bbfa0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="Exporting to GlennHT Connectivity Files" href="exporting.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="exporting.html" title="Exporting to GlennHT Connectivity Files"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Plot3D 1.6.8 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Split Blocks</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="split-blocks">
<h1>Split Blocks<a class="headerlink" href="#split-blocks" title="Link to this heading">¶</a></h1>
<p>When solving a plot3D block it is often useful to break it into smaller blocks of a certain size.
This will improve the speed by splitting the blocks and allowing each CPU core to solve a part of the mesh.
BUT we also need to maintain something called multi-grid.</p>
<section id="multi-grid-concept">
<h2>Multi-grid concept<a class="headerlink" href="#multi-grid-concept" title="Link to this heading">¶</a></h2>
<p>Mulit-grid is a concept where you take a gird say 4x4 and you solve it as a 2x2 then interpolate the results on to the larger grid.
The idea of solving a coarse grid and translating the solution onto a finer grid allows you to reach a converged solution much faster. So that’s the benefits, what are the requirements?</p>
</section>
<section id="splitting-blocks-example">
<h2>Splitting Blocks Example<a class="headerlink" href="#splitting-blocks-example" title="Link to this heading">¶</a></h2>
<p>In this example we will use the file  <a class="reference external" href="https://nasa-public-data.s3.amazonaws.com/plot3d_utilities/PahtCascade-ASCII.xyz">PahtCascade-ASCII</a>
We will go from reading -&gt; splitting -&gt; connectivity -&gt; periodicity -&gt; viewing it in paraview</p>
<section id="reading-the-file-and-split-the-blocks">
<h3>Reading the file and split the blocks<a class="headerlink" href="#reading-the-file-and-split-the-blocks" title="Link to this heading">¶</a></h3>
<p>When you specify the number of cells per block to split into, the code will try to match multigrid so the number of cells may change slightly</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">plot3d</span><span class="w"> </span><span class="kn">import</span> <span class="n">split_blocks</span><span class="p">,</span> <span class="n">Direction</span><span class="p">,</span> <span class="n">read_plot3D</span><span class="p">,</span><span class="n">write_plot3D</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">read_plot3D</span><span class="p">(</span><span class="s1">&#39;PahtCascade-ASCII.xyz&#39;</span><span class="p">,</span><span class="n">binary</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Reading plot3D</span>
<span class="linenos">4</span><span class="n">blocks_split</span> <span class="o">=</span> <span class="n">split_blocks</span><span class="p">(</span><span class="n">blocks</span><span class="p">,</span><span class="mi">300000</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">Direction</span><span class="o">.</span><span class="n">i</span><span class="p">)</span>   <span class="c1"># Here we split into chunks of size 300000 cells per block</span>
<span class="linenos">5</span><span class="n">write_plot3D</span><span class="p">(</span><span class="s1">&#39;PahtCascade-Split.xyz&#39;</span><span class="p">,</span><span class="n">blocks_split</span><span class="p">,</span><span class="n">binary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="finding-connectivity">
<h3>Finding Connectivity<a class="headerlink" href="#finding-connectivity" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">face_matches</span><span class="p">,</span> <span class="n">outer_faces_formatted</span> <span class="o">=</span> <span class="n">connectivity</span><span class="p">(</span><span class="n">blocks_split</span><span class="p">)</span>
<span class="linenos">2</span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;connectivity-block-split.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos">3</span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">({</span><span class="s2">&quot;face_matches&quot;</span><span class="p">:</span><span class="n">face_matches</span><span class="p">,</span> <span class="s2">&quot;outer_faces&quot;</span><span class="p">:</span><span class="n">outer_faces_formatted</span><span class="p">},</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="finding-periodicity">
<h3>Finding Periodicity<a class="headerlink" href="#finding-periodicity" title="Link to this heading">¶</a></h3>
<p>This will find the periodic faces of the split block</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;connectivity-block-split.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos"> 2</span>    <span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="linenos"> 3</span>    <span class="n">face_matches</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;face_matches&#39;</span><span class="p">]</span>
<span class="linenos"> 4</span>    <span class="n">outer_faces</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;outer_faces&#39;</span><span class="p">]</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">read_plot3D</span><span class="p">(</span><span class="s1">&#39;PahtCascade-Split.xyz&#39;</span><span class="p">,</span> <span class="n">binary</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">big_endian</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="n">periodic_surfaces</span><span class="p">,</span> <span class="n">outer_faces_to_keep</span><span class="p">,</span><span class="n">periodic_faces</span><span class="p">,</span><span class="n">outer_faces</span> <span class="o">=</span> <span class="n">periodicity</span><span class="p">(</span><span class="n">blocks</span><span class="p">,</span><span class="n">outer_faces</span><span class="p">,</span><span class="n">face_matches</span><span class="p">,</span><span class="n">periodic_direction</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="n">rotation_axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="n">nblades</span><span class="o">=</span><span class="mi">55</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;connectivity-block-split_v02.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos"> 9</span>    <span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;match&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">face_matches</span><span class="p">]</span> <span class="c1"># Remove the dataframe</span>
<span class="linenos">10</span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">({</span><span class="s2">&quot;face_matches&quot;</span><span class="p">:</span><span class="n">face_matches</span><span class="p">,</span> <span class="s2">&quot;outer_faces&quot;</span><span class="p">:</span><span class="n">outer_faces_to_keep</span><span class="p">,</span> <span class="s2">&quot;periodic_surfaces&quot;</span><span class="p">:</span><span class="n">periodic_surfaces</span><span class="p">},</span><span class="n">f</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="c1"># Append periodic surfaces to face_matches</span>
<span class="linenos">13</span><span class="n">face_matches</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">periodic_surfaces</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="plotting-split-blocks-with-paraview">
<h2>Plotting Split Blocks with Paraview<a class="headerlink" href="#plotting-split-blocks-with-paraview" title="Link to this heading">¶</a></h2>
<p>Library file that you will need in the same directory</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">paraview.simple</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="c1">#pylint: skip-file</span>
<span class="n">paraview</span><span class="o">.</span><span class="n">simple</span><span class="o">.</span><span class="n">_DisableFirstRenderCameraReset</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">Load</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calls pvpython and displays the file</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): [description]</span>

<span class="sd">    Returns:</span>
<span class="sd">        (tuple): tuple containing:</span>

<span class="sd">            - **Plot3D** (paraview.source): source object for plot3d </span>
<span class="sd">            - **plot3D_Display** (paraview display): this is the display object for the source. Colors and things </span>
<span class="sd">            - **View** (paraview.source): source object for plot3d </span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">plot3D</span> <span class="o">=</span> <span class="n">PLOT3DReader</span><span class="p">(</span><span class="n">registrationName</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">QFileName</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">FileName</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
            <span class="n">FunctionFileName</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="c1"># set active source</span>
    <span class="n">SetActiveSource</span><span class="p">(</span><span class="n">plot3D</span><span class="p">)</span>
    <span class="c1"># get active view</span>
    <span class="n">View</span> <span class="o">=</span> <span class="n">GetActiveViewOrCreate</span><span class="p">(</span><span class="s1">&#39;RenderView&#39;</span><span class="p">)</span>    
    <span class="c1"># show data in view</span>
    <span class="n">plot3D_Display</span> <span class="o">=</span> <span class="n">Show</span><span class="p">(</span><span class="n">plot3D</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span>
    <span class="c1"># trace defaults for the display properties.</span>
    <span class="n">plot3D_Display</span><span class="o">.</span><span class="n">Representation</span> <span class="o">=</span> <span class="s1">&#39;Outline&#39;</span>
    <span class="n">plot3D_Display</span><span class="o">.</span><span class="n">ColorArrayName</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POINTS&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="n">plot3D_Display</span><span class="o">.</span><span class="n">OSPRayScaleFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
    <span class="n">plot3D_Display</span><span class="o">.</span><span class="n">SelectOrientationVectors</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">plot3D_Display</span><span class="o">.</span><span class="n">ScaleFactor</span> <span class="o">=</span> <span class="mf">0.5376288175582886</span>
    <span class="n">plot3D_Display</span><span class="o">.</span><span class="n">SelectScaleArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">plot3D_Display</span><span class="o">.</span><span class="n">GlyphType</span> <span class="o">=</span> <span class="s1">&#39;Arrow&#39;</span>
    <span class="n">plot3D_Display</span><span class="o">.</span><span class="n">PolarAxes</span> <span class="o">=</span> <span class="s1">&#39;PolarAxesRepresentation&#39;</span>
    <span class="n">plot3D_Display</span><span class="o">.</span><span class="n">ScalarOpacityUnitDistance</span> <span class="o">=</span> <span class="mf">0.11673090489063437</span>

    <span class="c1"># reset view to fit data</span>
    <span class="n">View</span><span class="o">.</span><span class="n">ResetCamera</span><span class="p">()</span>
    
    <span class="c1"># show color bar/color legend</span>
    <span class="n">plot3D_Display</span><span class="o">.</span><span class="n">SetRepresentationType</span><span class="p">(</span><span class="s1">&#39;Outline&#39;</span><span class="p">)</span>
    <span class="n">ColorBy</span><span class="p">(</span><span class="n">plot3D_Display</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;FIELD&#39;</span><span class="p">,</span> <span class="s1">&#39;vtkBlockColors&#39;</span><span class="p">))</span>
    <span class="n">LUT</span> <span class="o">=</span> <span class="n">GetColorTransferFunction</span><span class="p">(</span><span class="s1">&#39;SolidColor&#39;</span><span class="p">)</span>
    <span class="n">HideScalarBarIfNotNeeded</span><span class="p">(</span><span class="n">LUT</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span> <span class="c1"># Change to solid color</span>
    <span class="k">return</span> <span class="n">plot3D</span><span class="p">,</span><span class="n">plot3D_Display</span><span class="p">,</span><span class="n">View</span><span class="p">,</span><span class="n">LUT</span>

<span class="k">def</span><span class="w"> </span><span class="nf">SetCamera</span><span class="p">(</span><span class="n">View</span><span class="p">,</span><span class="n">position</span><span class="p">,</span><span class="n">focalPoint</span><span class="p">,</span><span class="n">ViewUp</span><span class="p">):</span>  
    <span class="c1"># current camera placement for renderView1</span>
    <span class="n">View</span><span class="o">.</span><span class="n">CameraPosition</span> <span class="o">=</span> <span class="n">position</span>
    <span class="n">View</span><span class="o">.</span><span class="n">CameraFocalPoint</span> <span class="o">=</span> <span class="n">focalPoint</span>
    <span class="n">View</span><span class="o">.</span><span class="n">CameraViewUp</span> <span class="o">=</span> <span class="n">ViewUp</span>
    <span class="n">View</span><span class="o">.</span><span class="n">CameraParallelScale</span> <span class="o">=</span> <span class="mf">3.242501630387953</span>

<span class="c1"># Extracts the mesh block</span>
<span class="c1"># Block indicies should be an array format</span>
<span class="k">def</span><span class="w"> </span><span class="nf">ExtractBlocks</span><span class="p">(</span><span class="n">source</span><span class="p">,</span><span class="n">View</span><span class="p">,</span><span class="n">BlockIndicies</span><span class="p">):</span>
    <span class="n">extractBlock1</span> <span class="o">=</span> <span class="n">ExtractBlock</span><span class="p">(</span><span class="n">Input</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
    <span class="n">extractBlock1</span><span class="o">.</span><span class="n">BlockIndices</span> <span class="o">=</span> <span class="n">BlockIndicies</span>
    <span class="n">extractBlock1Display</span> <span class="o">=</span> <span class="n">Show</span><span class="p">(</span><span class="n">extractBlock1</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">Representation</span> <span class="o">=</span> <span class="s1">&#39;Outline&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">ColorArrayName</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POINTS&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">OSPRayScaleFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">SelectOrientationVectors</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">ScaleFactor</span> <span class="o">=</span> <span class="mf">0.2489664673805237</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">SelectScaleArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">GlyphType</span> <span class="o">=</span> <span class="s1">&#39;Arrow&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">PolarAxes</span> <span class="o">=</span> <span class="s1">&#39;PolarAxesRepresentation&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">ScalarOpacityUnitDistance</span> <span class="o">=</span> <span class="mf">0.07851226208722488</span>
    <span class="n">Hide</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span>
    <span class="n">SetActiveSource</span><span class="p">(</span><span class="n">extractBlock1</span><span class="p">)</span>
    <span class="c1"># set scalar coloring</span>
    <span class="n">ColorBy</span><span class="p">(</span><span class="n">extractBlock1Display</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;FIELD&#39;</span><span class="p">,</span> <span class="s1">&#39;vtkBlockColors&#39;</span><span class="p">))</span>

    <span class="c1"># show color bar/color legend</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">SetScalarBarVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="c1"># show color bar/color legend</span>
    <span class="n">ColorBy</span><span class="p">(</span><span class="n">extractBlock1Display</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;FIELD&#39;</span><span class="p">,</span> <span class="s1">&#39;vtkBlockColors&#39;</span><span class="p">))</span>
    <span class="n">LUT</span> <span class="o">=</span> <span class="n">GetColorTransferFunction</span><span class="p">(</span><span class="s1">&#39;vtkBlockColors&#39;</span><span class="p">)</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">SetRepresentationType</span><span class="p">(</span><span class="s1">&#39;Surface With Edges&#39;</span><span class="p">)</span>
    <span class="n">ColorBy</span><span class="p">(</span><span class="n">extractBlock1Display</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;FIELD&#39;</span><span class="p">,</span> <span class="s1">&#39;Solid Color&#39;</span><span class="p">))</span>
    <span class="n">HideScalarBarIfNotNeeded</span><span class="p">(</span><span class="n">LUT</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span> <span class="c1"># Change to solid color</span>
    <span class="k">return</span> <span class="n">extractBlock1</span><span class="p">,</span><span class="n">extractBlock1Display</span><span class="p">,</span><span class="n">LUT</span>

<span class="k">def</span><span class="w"> </span><span class="nf">ExtractSurface</span><span class="p">(</span><span class="n">source</span><span class="p">,</span><span class="n">name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">VOI</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;[summary]</span>

<span class="sd">    Args:</span>
<span class="sd">        source ([type]): [description]</span>
<span class="sd">        name (string): name of surface </span>
<span class="sd">        VOI (List[int]): Volume of interest [imin,imax,jmin,jmax,kmin,kmax]</span>
<span class="sd">    Returns:</span>
<span class="sd">        [type]: [description]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">renderView1</span> <span class="o">=</span> <span class="n">GetActiveViewOrCreate</span><span class="p">(</span><span class="s1">&#39;RenderView&#39;</span><span class="p">)</span>

    <span class="n">Hide</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">renderView1</span><span class="p">)</span>
    <span class="n">extractSubset1</span> <span class="o">=</span> <span class="n">ExtractSubset</span><span class="p">(</span><span class="n">registrationName</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">Input</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
    <span class="n">extractSubset1</span><span class="o">.</span><span class="n">VOI</span> <span class="o">=</span> <span class="n">voi</span>

    <span class="n">renderView1</span> <span class="o">=</span> <span class="n">GetActiveViewOrCreate</span><span class="p">(</span><span class="s1">&#39;RenderView&#39;</span><span class="p">)</span>
    <span class="n">extractSubset1Display</span> <span class="o">=</span> <span class="n">Show</span><span class="p">(</span><span class="n">extractSubset1</span><span class="p">,</span> <span class="n">renderView1</span><span class="p">,</span> <span class="s1">&#39;StructuredGridRepresentation&#39;</span><span class="p">)</span>
    <span class="c1"># trace defaults for the display properties.</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">Representation</span> <span class="o">=</span> <span class="s1">&#39;Surface&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">ColorArrayName</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SelectTCoordArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SelectNormalArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SelectTangentArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">OSPRayScaleFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SelectOrientationVectors</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">ScaleFactor</span> <span class="o">=</span> <span class="mf">7.410221099853516</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SelectScaleArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">GlyphType</span> <span class="o">=</span> <span class="s1">&#39;Arrow&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">GlyphTableIndexArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">GaussianRadius</span> <span class="o">=</span> <span class="mf">0.3705110549926758</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SetScaleArray</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">ScaleTransferFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">OpacityArray</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">OpacityTransferFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">DataAxesGrid</span> <span class="o">=</span> <span class="s1">&#39;GridAxesRepresentation&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">PolarAxes</span> <span class="o">=</span> <span class="s1">&#39;PolarAxesRepresentation&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">ScalarOpacityUnitDistance</span> <span class="o">=</span> <span class="mf">6.758095838007181</span>

    <span class="c1"># update the view to ensure updated data information</span>
    <span class="n">renderView1</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SetRepresentationType</span><span class="p">(</span><span class="s1">&#39;Surface&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">extractSubset1</span><span class="p">,</span><span class="n">extractSubset1Display</span>

<span class="k">def</span><span class="w"> </span><span class="nf">ChangeRepresentationMesh</span><span class="p">(</span><span class="n">source</span><span class="p">,</span><span class="n">sourceDisplay</span><span class="p">,</span><span class="n">View</span><span class="p">,</span><span class="n">LUT</span><span class="p">):</span>
    <span class="n">SetActiveSource</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="c1"># set active source</span>
    <span class="n">HideScalarBarIfNotNeeded</span><span class="p">(</span><span class="n">LUT</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span> <span class="c1"># Hide the scalar bar for this color map if no visible data is colored by it.    </span>
    <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">SetRepresentationType</span><span class="p">(</span><span class="s1">&#39;Surface With Edges&#39;</span><span class="p">)</span> <span class="c1"># set active source</span>
    <span class="n">ColorBy</span><span class="p">(</span><span class="n">sourceDisplay</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;FIELD&#39;</span><span class="p">,</span> <span class="s1">&#39;Solid Color&#39;</span><span class="p">))</span>


<span class="k">def</span><span class="w"> </span><span class="nf">Periodicity</span><span class="p">(</span><span class="n">source</span><span class="p">,</span><span class="n">nBlades</span><span class="p">,</span><span class="n">BlockIndices</span><span class="p">,</span><span class="n">View</span><span class="p">):</span>  
    <span class="c1"># hide data in view</span>
    <span class="n">Hide</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span>
    <span class="n">angularPeriodicFilter1</span> <span class="o">=</span> <span class="n">AngularPeriodicFilter</span><span class="p">(</span><span class="n">Input</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

    <span class="c1"># Properties modified on angularPeriodicFilter1</span>
    <span class="n">angularPeriodicFilter1</span><span class="o">.</span><span class="n">BlockIndices</span> <span class="o">=</span> <span class="n">BlockIndices</span>
    <span class="n">angularPeriodicFilter1</span><span class="o">.</span><span class="n">IterationMode</span> <span class="o">=</span> <span class="s1">&#39;Manual&#39;</span>
    <span class="n">angularPeriodicFilter1</span><span class="o">.</span><span class="n">NumberOfPeriods</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">angularPeriodicFilter1</span><span class="o">.</span><span class="n">RotationAngle</span> <span class="o">=</span> <span class="mf">360.0</span><span class="o">/</span><span class="n">nBlades</span>

    <span class="n">SetActiveSource</span><span class="p">(</span><span class="n">angularPeriodicFilter1</span><span class="p">)</span>
    <span class="c1"># get color transfer function/color map for &#39;Density&#39;</span>
    <span class="n">LUT</span> <span class="o">=</span> <span class="n">GetColorTransferFunction</span><span class="p">(</span><span class="s1">&#39;Density&#39;</span><span class="p">)</span>

    <span class="c1"># show data in view</span>
    <span class="n">angularPeriodicFilter1Display</span> <span class="o">=</span> <span class="n">Show</span><span class="p">(</span><span class="n">angularPeriodicFilter1</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span>
    <span class="c1"># trace defaults for the display properties.</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">Representation</span> <span class="o">=</span> <span class="s1">&#39;Surface&#39;</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">ColorArrayName</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POINTS&#39;</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">]</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">LookupTable</span> <span class="o">=</span> <span class="n">LUT</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">OSPRayScaleArray</span> <span class="o">=</span> <span class="s1">&#39;Density&#39;</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">OSPRayScaleFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">SelectOrientationVectors</span> <span class="o">=</span> <span class="s1">&#39;Momentum&#39;</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">ScaleFactor</span> <span class="o">=</span> <span class="mf">0.6140377521514893</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">SelectScaleArray</span> <span class="o">=</span> <span class="s1">&#39;Density&#39;</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">GlyphType</span> <span class="o">=</span> <span class="s1">&#39;Arrow&#39;</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">PolarAxes</span> <span class="o">=</span> <span class="s1">&#39;PolarAxesRepresentation&#39;</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">ScalarOpacityUnitDistance</span> <span class="o">=</span> <span class="mf">0.35345957752629076</span>
    <span class="c1"># show color bar/color legend</span>
    <span class="n">angularPeriodicFilter1Display</span><span class="o">.</span><span class="n">SetScalarBarVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">angularPeriodicFilter1</span><span class="p">,</span><span class="n">angularPeriodicFilter1Display</span><span class="p">,</span><span class="n">LUT</span>


<span class="k">def</span><span class="w"> </span><span class="nf">CreateNewLayout</span><span class="p">(</span><span class="n">source</span><span class="p">,</span><span class="n">layoutName</span><span class="p">):</span>
    <span class="n">CreateLayout</span><span class="p">(</span><span class="n">layoutName</span><span class="p">)</span>

    <span class="c1"># Create a new &#39;Render View&#39;</span>
    <span class="n">renderView2</span> <span class="o">=</span> <span class="n">CreateView</span><span class="p">(</span><span class="s1">&#39;RenderView&#39;</span><span class="p">)</span>
    <span class="c1">#renderView2.ViewSize = [1233, 814]</span>
    <span class="n">renderView2</span><span class="o">.</span><span class="n">AxesGrid</span> <span class="o">=</span> <span class="s1">&#39;GridAxes3DActor&#39;</span>
    <span class="n">renderView2</span><span class="o">.</span><span class="n">StereoType</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">renderView2</span><span class="o">.</span><span class="n">Background</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.32</span><span class="p">,</span> <span class="mf">0.34</span><span class="p">,</span> <span class="mf">0.43</span><span class="p">]</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">GetLayout</span><span class="p">()</span>
    
    <span class="c1"># set active source</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">source</span><span class="p">):</span>
        <span class="n">SetActiveSource</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="c1"># show data in view</span>
        <span class="n">sourceDisplay</span> <span class="o">=</span> <span class="n">Show</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">renderView2</span><span class="p">)</span>
        <span class="c1"># trace defaults for the display properties.</span>
        <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">Representation</span> <span class="o">=</span> <span class="s1">&#39;Outline&#39;</span>
        <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">ColorArrayName</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POINTS&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
        <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">OSPRayScaleArray</span> <span class="o">=</span> <span class="s1">&#39;Density&#39;</span>
        <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">OSPRayScaleFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
        <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">SelectOrientationVectors</span> <span class="o">=</span> <span class="s1">&#39;Momentum&#39;</span>
        <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">ScaleFactor</span> <span class="o">=</span> <span class="mf">0.5376288175582886</span>
        <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">SelectScaleArray</span> <span class="o">=</span> <span class="s1">&#39;Density&#39;</span>
        <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">GlyphType</span> <span class="o">=</span> <span class="s1">&#39;Arrow&#39;</span>
        <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">PolarAxes</span> <span class="o">=</span> <span class="s1">&#39;PolarAxesRepresentation&#39;</span>
        <span class="n">sourceDisplay</span><span class="o">.</span><span class="n">ScalarOpacityUnitDistance</span> <span class="o">=</span> <span class="mf">0.11673090489063437</span>
        <span class="c1"># reset view to fit data</span>
        <span class="n">renderView2</span><span class="o">.</span><span class="n">ResetCamera</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">layout</span><span class="p">,</span><span class="n">sourceDisplay</span><span class="p">,</span><span class="n">renderView2</span>
    
    <span class="k">return</span> <span class="n">layout</span><span class="p">,</span><span class="n">renderView2</span>
</pre></div>
</div>
<p>The script that will plot the mesh and periodicity + connectivity + outer faces</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span> <span class="c1"># This allows you to select files locally</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pv_library</span><span class="w"> </span><span class="kn">import</span> <span class="n">Load</span><span class="p">,</span> <span class="n">ExtractBlocks</span><span class="p">,</span> <span class="n">ExtractSurface</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">paraview.simple</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="c1"># Extracts the mesh block</span>
<span class="c1"># Block indicies should be an array format</span>
<span class="k">def</span><span class="w"> </span><span class="nf">ExtractBlocks</span><span class="p">(</span><span class="n">source</span><span class="p">,</span><span class="n">View</span><span class="p">,</span><span class="n">BlockIndicies</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extracts block(s) from a mesh in paraview </span>

<span class="sd">    Args:</span>
<span class="sd">        source ([unknown]): This is a paraview object that describes a source </span>
<span class="sd">        View ([unknown]): Thisi s a paraview object that describes a view </span>
<span class="sd">        BlockIndicies (List[int]): List of blocks you wish to extract to look at. Index should start at 1</span>

<span class="sd">    Returns:</span>
<span class="sd">        (tuple): tuple containing:</span>

<span class="sd">            - **extractBlock1** (paraview source): source object representing the block.</span>
<span class="sd">            - **extractBlock1Display** (paraview display): display settings for the source.</span>
<span class="sd">            - **extractBlock1Display** (paraview display): display settings for the source.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">extractBlock1</span> <span class="o">=</span> <span class="n">ExtractBlock</span><span class="p">(</span><span class="n">Input</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
    <span class="n">extractBlock1</span><span class="o">.</span><span class="n">BlockIndices</span> <span class="o">=</span> <span class="n">BlockIndicies</span>
    <span class="n">extractBlock1Display</span> <span class="o">=</span> <span class="n">Show</span><span class="p">(</span><span class="n">extractBlock1</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">Representation</span> <span class="o">=</span> <span class="s1">&#39;Outline&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">ColorArrayName</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POINTS&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">OSPRayScaleFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">SelectOrientationVectors</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">ScaleFactor</span> <span class="o">=</span> <span class="mf">0.2489664673805237</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">SelectScaleArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">GlyphType</span> <span class="o">=</span> <span class="s1">&#39;Arrow&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">PolarAxes</span> <span class="o">=</span> <span class="s1">&#39;PolarAxesRepresentation&#39;</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">ScalarOpacityUnitDistance</span> <span class="o">=</span> <span class="mf">0.07851226208722488</span>
    <span class="n">Hide</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span>
    <span class="n">SetActiveSource</span><span class="p">(</span><span class="n">extractBlock1</span><span class="p">)</span>
    <span class="c1"># set scalar coloring</span>
    <span class="n">ColorBy</span><span class="p">(</span><span class="n">extractBlock1Display</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;FIELD&#39;</span><span class="p">,</span> <span class="s1">&#39;vtkBlockColors&#39;</span><span class="p">))</span>

    <span class="c1"># show color bar/color legend</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">SetScalarBarVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="c1"># show color bar/color legend</span>
    <span class="n">ColorBy</span><span class="p">(</span><span class="n">extractBlock1Display</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;FIELD&#39;</span><span class="p">,</span> <span class="s1">&#39;vtkBlockColors&#39;</span><span class="p">))</span>
    <span class="n">LUT</span> <span class="o">=</span> <span class="n">GetColorTransferFunction</span><span class="p">(</span><span class="s1">&#39;vtkBlockColors&#39;</span><span class="p">)</span>
    <span class="n">extractBlock1Display</span><span class="o">.</span><span class="n">SetRepresentationType</span><span class="p">(</span><span class="s1">&#39;Surface With Edges&#39;</span><span class="p">)</span>
    <span class="n">ColorBy</span><span class="p">(</span><span class="n">extractBlock1Display</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;FIELD&#39;</span><span class="p">,</span> <span class="s1">&#39;Solid Color&#39;</span><span class="p">))</span>
    <span class="n">HideScalarBarIfNotNeeded</span><span class="p">(</span><span class="n">LUT</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span> <span class="c1"># Change to solid color</span>
    <span class="k">return</span> <span class="n">extractBlock1</span><span class="p">,</span><span class="n">extractBlock1Display</span><span class="p">,</span><span class="n">LUT</span>

<span class="k">def</span><span class="w"> </span><span class="nf">CreateSubset</span><span class="p">(</span><span class="n">block_source</span><span class="p">,</span><span class="n">voi</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span><span class="n">name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">opacity</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a subset within paraview to display the mesh </span>

<span class="sd">    Args:</span>
<span class="sd">        block_source ([type]): [description]</span>
<span class="sd">        voi (List[int]): This is the volume of interest. When (I,J,K)MIN=(I,J,K)MAX it is a surface/face. When two quantities is the same e.g. IMIN=IMAX and JMIN=JMAX you have an edge. If none of them are equal then you have a volume </span>
<span class="sd">        name (str): Name you want paraview to display in the left </span>
<span class="sd">        opacity (float, optional): [description]. Defaults to 1.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (tuple): tuple containing:</span>

<span class="sd">            - **extractSubset1** (paraview source): source object representing the subset.</span>
<span class="sd">            - **extractSubset1Display** (paraview display): display settings for the source.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Plot the Face </span>
    <span class="n">Hide</span><span class="p">(</span><span class="n">block_source</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span>
    <span class="n">extractSubset1</span> <span class="o">=</span> <span class="n">ExtractSubset</span><span class="p">(</span><span class="n">registrationName</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">Input</span><span class="o">=</span><span class="n">block_source</span><span class="p">)</span>
    <span class="n">extractSubset1</span><span class="o">.</span><span class="n">VOI</span> <span class="o">=</span> <span class="n">voi</span>

    <span class="n">renderView1</span> <span class="o">=</span> <span class="n">GetActiveViewOrCreate</span><span class="p">(</span><span class="s1">&#39;RenderView&#39;</span><span class="p">)</span>
    <span class="n">extractSubset1Display</span> <span class="o">=</span> <span class="n">Show</span><span class="p">(</span><span class="n">extractSubset1</span><span class="p">,</span> <span class="n">renderView1</span><span class="p">,</span> <span class="s1">&#39;StructuredGridRepresentation&#39;</span><span class="p">)</span>
    <span class="c1"># trace defaults for the display properties.</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">Representation</span> <span class="o">=</span> <span class="s1">&#39;Surface&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">ColorArrayName</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SelectTCoordArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SelectNormalArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SelectTangentArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">OSPRayScaleFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SelectOrientationVectors</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">ScaleFactor</span> <span class="o">=</span> <span class="mf">7.410221099853516</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SelectScaleArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">GlyphType</span> <span class="o">=</span> <span class="s1">&#39;Arrow&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">GlyphTableIndexArray</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">GaussianRadius</span> <span class="o">=</span> <span class="mf">0.3705110549926758</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SetScaleArray</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">ScaleTransferFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">OpacityArray</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">OpacityTransferFunction</span> <span class="o">=</span> <span class="s1">&#39;PiecewiseFunction&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">DataAxesGrid</span> <span class="o">=</span> <span class="s1">&#39;GridAxesRepresentation&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">PolarAxes</span> <span class="o">=</span> <span class="s1">&#39;PolarAxesRepresentation&#39;</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">ScalarOpacityUnitDistance</span> <span class="o">=</span> <span class="mf">6.758095838007181</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">SetRepresentationType</span><span class="p">(</span><span class="s1">&#39;Surface&#39;</span><span class="p">)</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">Opacity</span> <span class="o">=</span> <span class="n">opacity</span>
    <span class="c1"># Add in the face color and update </span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">AmbientColor</span> <span class="o">=</span> <span class="n">rgb_face_matches</span><span class="p">[</span><span class="n">match_indx</span><span class="p">]</span>
    <span class="n">extractSubset1Display</span><span class="o">.</span><span class="n">DiffuseColor</span> <span class="o">=</span> <span class="n">rgb_face_matches</span><span class="p">[</span><span class="n">match_indx</span><span class="p">]</span>
    <span class="n">renderView1</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">extractSubset1</span><span class="p">,</span> <span class="n">extractSubset1Display</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Main Code</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Read the connectivity file</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;connectivity-block-split_v02.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">face_matches</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;face_matches&#39;</span><span class="p">]</span>
        <span class="n">outer_faces</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;outer_faces&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;periodic_surfaces&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">periodic_faces</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;periodic_surfaces&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">periodic_faces</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">blocks_to_extract</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">face_matches</span><span class="p">]</span>
    <span class="n">blocks_to_extract</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">face_matches</span><span class="p">])</span>
    <span class="n">blocks_to_extract</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">blocks_to_extract</span><span class="p">))</span>
    <span class="n">blocks_to_extract</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">blocks_to_extract</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Generate Random Colors </span>
<span class="sd">    </span>
<span class="sd">    This part generates random colors so that each color is associated with a face match. </span>
<span class="sd">    Doesn&#39;t matter what the block is a single match is assigned the same color. </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">rgb_face_matches</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">face_matches</span><span class="p">)):</span>
        <span class="n">rgb_face_matches</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span><span class="o">/</span><span class="mi">255</span><span class="p">])</span>

    <span class="n">rgb_outer_faces</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">outer_faces</span><span class="p">)):</span>
        <span class="n">rgb_outer_faces</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span><span class="o">/</span><span class="mi">255</span><span class="p">])</span>

    <span class="c1"># Load mesh</span>
    <span class="n">plot3d_binary_filename</span> <span class="o">=</span> <span class="s1">&#39;PahtCascade-Split.xyz&#39;</span>
    <span class="n">plot3D_source</span><span class="p">,</span><span class="n">plot3D_Display</span><span class="p">,</span><span class="n">View</span><span class="p">,</span><span class="n">LUT</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">plot3d_binary_filename</span><span class="p">)</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Loop through all the blocks and create within each block the match and the outer surfaces</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">blocks_to_extract</span><span class="p">:</span> <span class="c1"># Block indicies </span>
        <span class="n">block_source</span><span class="p">,</span><span class="n">block_display</span><span class="p">,</span><span class="n">LUT</span> <span class="o">=</span> <span class="n">ExtractBlocks</span><span class="p">(</span><span class="n">plot3D_source</span><span class="p">,</span><span class="n">View</span><span class="p">,[</span><span class="n">b</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">RenameSource</span><span class="p">(</span><span class="s1">&#39;Block &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">block_source</span><span class="p">)</span>
        <span class="n">block_source</span> <span class="o">=</span> <span class="n">FindSource</span><span class="p">(</span><span class="s1">&#39;Block &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
        
        <span class="c1"># Plot the face matches </span>
        <span class="k">for</span> <span class="n">match_indx</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">face_matches</span><span class="p">):</span>
            <span class="c1"># Add Plots for Matched Faces </span>
            <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span> <span class="ow">or</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span> <span class="p">:</span> 
                <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">voi</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;IMIN&#39;</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;IMAX&#39;</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;JMIN&#39;</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;JMAX&#39;</span><span class="p">],</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;KMIN&#39;</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;KMAX&#39;</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">voi</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;IMIN&#39;</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;IMAX&#39;</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;JMIN&#39;</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;JMAX&#39;</span><span class="p">],</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;KMIN&#39;</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;KMAX&#39;</span><span class="p">]]</span>
                <span class="n">CreateSubset</span><span class="p">(</span><span class="n">block_source</span><span class="p">,</span> <span class="n">voi</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;match &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">match_indx</span><span class="p">))</span>
        
        <span class="c1"># Plot the outer faces  </span>
        <span class="k">for</span> <span class="n">surface_indx</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">outer_faces</span><span class="p">):</span>
            <span class="c1"># Add Plots for Outer Faces</span>
            <span class="k">if</span> <span class="n">o</span><span class="p">[</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                <span class="n">voi</span> <span class="o">=</span> <span class="p">[</span><span class="n">o</span><span class="p">[</span><span class="s1">&#39;IMIN&#39;</span><span class="p">],</span> <span class="n">o</span><span class="p">[</span><span class="s1">&#39;IMAX&#39;</span><span class="p">],</span> <span class="n">o</span><span class="p">[</span><span class="s1">&#39;JMIN&#39;</span><span class="p">],</span> <span class="n">o</span><span class="p">[</span><span class="s1">&#39;JMAX&#39;</span><span class="p">],</span><span class="n">o</span><span class="p">[</span><span class="s1">&#39;KMIN&#39;</span><span class="p">],</span> <span class="n">o</span><span class="p">[</span><span class="s1">&#39;KMAX&#39;</span><span class="p">]]</span>
                <span class="n">CreateSubset</span><span class="p">(</span><span class="n">block_source</span><span class="p">,</span> <span class="n">voi</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_face &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">surface_indx</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">opacity</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span> 
        
        <span class="c1"># Plot the outer faces  </span>
        <span class="k">for</span> <span class="n">periodic_indx</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">periodic_faces</span><span class="p">):</span>
            <span class="c1"># Add Plots for Outer Faces</span>
            <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span> <span class="ow">and</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span> <span class="c1"># Periodicity within the block </span>
                <span class="n">voi</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;IMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;IMAX&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;JMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;JMAX&#39;</span><span class="p">],</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;KMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;KMAX&#39;</span><span class="p">]]</span>
                <span class="n">CreateSubset</span><span class="p">(</span><span class="n">block_source</span><span class="p">,</span> <span class="n">voi</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;periodic &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">periodic_indx</span><span class="p">))</span>
                <span class="n">voi</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;IMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;IMAX&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;JMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;JMAX&#39;</span><span class="p">],</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;KMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;KMAX&#39;</span><span class="p">]]</span>
                <span class="n">CreateSubset</span><span class="p">(</span><span class="n">block_source</span><span class="p">,</span> <span class="n">voi</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;periodic &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">periodic_indx</span><span class="p">))</span>

            <span class="k">elif</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span> <span class="ow">or</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span> <span class="c1"># Periodicity from block to block </span>
                <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;block_index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">voi</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;IMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;IMAX&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;JMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;JMAX&#39;</span><span class="p">],</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;KMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block1&#39;</span><span class="p">][</span><span class="s1">&#39;KMAX&#39;</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">voi</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;IMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;IMAX&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;JMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;JMAX&#39;</span><span class="p">],</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;KMIN&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;block2&#39;</span><span class="p">][</span><span class="s1">&#39;KMAX&#39;</span><span class="p">]]</span>
                <span class="n">CreateSubset</span><span class="p">(</span><span class="n">block_source</span><span class="p">,</span> <span class="n">voi</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;periodic &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">periodic_indx</span><span class="p">))</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Split Blocks</a><ul>
<li><a class="reference internal" href="#multi-grid-concept">Multi-grid concept</a></li>
<li><a class="reference internal" href="#splitting-blocks-example">Splitting Blocks Example</a><ul>
<li><a class="reference internal" href="#reading-the-file-and-split-the-blocks">Reading the file and split the blocks</a></li>
<li><a class="reference internal" href="#finding-connectivity">Finding Connectivity</a></li>
<li><a class="reference internal" href="#finding-periodicity">Finding Periodicity</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plotting-split-blocks-with-paraview">Plotting Split Blocks with Paraview</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="exporting.html"
                          title="previous chapter">Exporting to GlennHT Connectivity Files</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="changelog.html"
                          title="next chapter">Changelog</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/notes/split-blocks.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             >next</a> |</li>
        <li class="right" >
          <a href="exporting.html" title="Exporting to GlennHT Connectivity Files"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Plot3D 1.6.8 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Split Blocks</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Paht Juangphanich.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>